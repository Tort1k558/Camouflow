# Переменные и шаблоны

Сценарий поддерживает подстановки вида `{{var}}` в строковых полях шагов.

## Откуда берутся переменные

Переменные собираются из:

- полей профиля (импортированные значения: `email`, `password`, и любые другие по шаблону импорта)
- `extra_fields` профиля (если есть)
- shared variables (общие переменные)
- переменных, выставленных шагами (например `set_var`, `extract_text`, `http_request`)
  - также: `parse_var` (извлечённые значения)

## Подстановка `{{var}}`

Любая строка может включать плейсхолдер:

- `"Authorization: Bearer {{token}}"`
- `"https://example.com/u/{{user_id}}/settings"`

Если переменной нет — подставится пустая строка.

## Встроенные переменные

Некоторые переменные поддерживаются “из коробки”:

- `{{cookies}}` — JSON-строка с cookies, актуализируется перед шагом, если он содержит шаблон cookies.
- `{{timestamp}}` — локальный таймштамп `YYYY-MM-DD-HH-MM-SS`, обновляется перед шагом, если он содержит шаблон timestamp.

## Shared variables

Shared variables — общий словарь значений, доступный всем профилям при запуске.

Типы:

- `string` — строка
- `list` — список строк (в UI редактируется “по одному значению на строку”)

Использование:

- Подстановка `{{key}}` в шагах (как обычная переменная).
- Шаг `pop_shared` для “взятия” значения из общего списка и раскладывания по переменным.
