# Переходы и ошибки

## Переход по умолчанию

Если у шага нет явных переходов, сценарий выполняет шаги последовательно по списку.

## Переходы по тегам

Для ветвлений используются теги шагов:

- `tag` — уникальная метка шага (в редакторе генерируется автоматически, например `Step1`, `Step2`).
- `next_success_step` — переход при успехе.
- `next_error_step` — переход при ошибке.

## Поведение при ошибках (`on_error`)

Если шаг выбрасывает исключение, обработчик ошибки может:

- `stop` *(по умолчанию)* — остановить сценарий с ошибкой.
- `continue` — записать ошибку в лог и идти дальше.
- `skip` — аналогично continue (шаг считается пропущенным).
- `jump` — прыгнуть на `on_error_target` (должен быть `tag`).
- `set_var` — сохранить текст ошибки в переменную `on_error_target` (если не задано — `last_error`) и продолжить.

Также есть быстрый путь:

- если задан `next_error_step`, то при ошибке будет переход на него (в приоритете для некоторых действий).

## Завершение сценария

- Шаг `end` закрывает браузер и завершает сценарий.
- Вложенные сценарии (`run_scenario`) имеют защиту от рекурсии.

## Условия (compare)

Шаг `compare` используется как условный переход:

- `next_success_step` — ветка **True** (*YES*)
- `next_error_step` — ветка **False** (*NO*)
