# Scenarios

Вкладка **Scenarios** — библиотека сценариев и визуальный редактор шагов.

## Scenario library

Слева список сценариев.

- **New** — создать новый сценарий.
- **Load** — загрузить выбранный.
- **Save** — сохранить текущий.
- **Delete** — удалить.

Сценарии хранятся в `scenaries/*.json`.

## Details

Вверху справа:

- **Name** — имя сценария (ключ в библиотеке).
- **Description** — описание.
- **Variables in scenario** — список найденных переменных (по шагам, где есть `name/to_var/save_as`).

## Action map

Основной редактор — **Action map**:

- Каждый блок — шаг сценария.
- Блоки соединяются стрелками (успех/ошибка) и определяют переходы между шагами.
- Двойной клик/кнопка редактирования открывают модальное окно настройки шага.

Подробно про формат сценария и переходы: `scenarios/format.md`, `scenarios/flow.md`.

## Модальное окно шага

При добавлении/редактировании шага открывается окно с настройками. Набор полей зависит от выбранного action:

- Для шагов с селектором (`click`, `type`, `wait_element`, `extract_text`) будут поля селектора, типа, индекса и iframe.
- Для `http_request` показываются поля метода/заголовков/параметров/тела/сохранения результата.
- Для `parse_var` показываются поля переменной-источника, шаблона (pattern) и опция сохранения в профиль (**Update account**).
- Для `compare` показываются поля оператора сравнения и второго значения (переменная или текст), а ветвление задаётся через `next_success_step` (True) и `next_error_step` (False).
- Для `write_file` — имя файла.
- Для `sleep` — длительность.
- Для `switch_tab`/`close_tab` — индекс вкладки.

Если окно не помещается на экран — используется прокрутка.
